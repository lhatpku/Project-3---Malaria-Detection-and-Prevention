<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/map.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/cnn.css') }}"> 
  <title>Malaria Detection and Prevention</title>
  <link href="https://fonts.googleapis.com/css?family=Lato|Playfair+Display" rel="stylesheet">
  <style>
    #nav-bar {
      position: fixed;
      top: 0;
      z-index: 999;
      position: sticky;
    }
  </style>
</head>
  
<body>

    <div class = "section container">
        <h2>Malaria</h2>
        <p>Malaria is a disease that is transmitted from person to person by infected mosquitoes.<br>
            Malaria can be fatal. The World Health Organization (WHO) estimates that 438,000 people died because of malaria in 2015;
            the Institute of Health Metrics and Evaluation (IHME), Global Burden of Disease (GBD) puts this estimate at 620,000 in 2017.
        </p>
    </div>

    <div style="text-align:center">
        <span class="dot" onclick="currentSlide(1)"></span> 
        <span class="dot" onclick="currentSlide(2)"></span> 
        <span class="dot" onclick="currentSlide(3)"></span> 
    </div>
        
    <header id = "background">

        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>
        
    </header>

    <!-- Malaria world trend -->
    <div class = "section container">

        <section>

            <h2>Empirical View</h2>

            <h3>Malaria death by Countries</h3>
            <p>Africa is the world region that is most affected by malaria: 
                In 2015, the African continent held 9 out of 10 malaria victims. 
            </p>

            <form name="Trends">
                <p class = "radio-btn">
                    <label>
                    <input name="Trend" type="radio" checked value="Sunburst">
                    <span><i class="material-icons">pie_chart</i></span>
                    </label>
                </p>
                <p class="radio-btn">
                    <label>
                    <input name="Trend" type="radio" value="Map">
                    <span><i class="material-icons">map</i></span>
                    </label>
                </p>
            </form>

            <div id="sun-burst"></div>
            <svg id = "map" width="960" height="600"></svg>

            <form action="#">
                <p class="range-field">
                    <input type="range" id="range" min="2000" max="2017" step="1" value="2017"/>
                </p>
            </form>

        </section>

    </div>

    <div class = "section container">
        <h2>Prediction</h2>
        <div class="row">
            <div class="col s12 m3">
                <form>
                    <div class="input-field">
                        <select class="icons" id="feature-select">
                            <option value="mortality" selected>Child Mortality</option>
                            <option value="gdp">GDP Per Capital</option>
                            <option value="humidity">Humidity</option>
                        </select>
                    </div>
                    <div class="input-field">
                        <select class="icons" id="model-select">
                            <option value="linear" selected>Linear</option>
                            <option value="quad" >Quadratic</option>
                        </select>
                    </div>    
                    <button class="btn-large btn-floating waves-effect waves-light blue" type="submit" id = 'regression-submit' name="action">
                        <i class="material-icons">refresh</i>
                    </button>
                </form>
            </div>
            <div class="s12 col m8 push-m1" id="regression-plot"></div>
        </div>
    </div>

    <div class = "section container">
        <h2>Image Classifier</h2>

        <div class="row">

            <div class="col s12 m5">

                <ul class="collapsible">
                    <li>
                        <div class="collapsible-header"><i class="fas fa-info-circle"></i>Malaria’s mark on the human body</div>
                        <div class="collapsible-body blue-grey lighten-3"><span>The history of humanity is so closely entangled with the history of malaria that the disease left its mark on our bodies. 
                            Sickle cell disorder is a genetic disease that deforms red blood cells to be sickle-shaped. 
                            Carriers suffer from attacks of pain from a young age and their lives are cut short by the condition: it causes around 55,000 deaths every year.</span></div>
                    </li>
                    <li>
                        <div class="collapsible-header"><i class="fas fa-book-medical"></i>Cell Image Detection</div>
                        <div class="collapsible-body blue-grey lighten-3"><span>Malaria parasites can be identified by examining under the microscope a drop of the patient’s blood, spread out as a “blood smear” on a microscope slide. 
                            Prior to examination, the specimen is stained to give the parasites a distinctive appearance. 
                            This technique remains the gold standard for laboratory confirmation of malaria. </span></div>
                    </li>
                </ul>

            </div>

            <div class="col s12 m6 push-m1">
                <div class="card">

                    <div class="card-action center">

                        <form id="upload-file" method="post" enctype="multipart/form-data">
                            <label for="imageUpload" class="upload-label">
                                <i class="fas fa-file-upload"></i>
                            </label>
                            <input type="file" name="file" id="imageUpload" accept=".png, .jpg, .jpeg">
                        </form>

                    </div>

                    <div class="card-image center">
                        <div class="image-section" style="display:none;">
                            <div class="img-preview center">
                                <div id="imagePreview">
                                </div>
                            </div>
                            <div>
                                <button type="button" class="btn btn-primary btn-lg " id="btn-predict">Predict!</button>
                            </div>
                        </div>
                    </div>

                    <div class="card-content center">
                        <div class="loader" style="display:none;"></div>

                        <h3 id="result">
                            <span> </span>
                        </h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="page-footer grey darken-3">
        <div class="container">
            <div class="row">
            <div class="col s12 m8 offset-m2">
                <h5>About The Project</h5>
                <p>The project is to give an overview to answer the questions as "what is malaria and how it impacts human society", "how to detect malaria" and "what we can do to better control it"
                    We use Convolutional Neural Network to detect the disease from cell level and use different regression models to find the best way to control and prevent.
                </p>
            </div>
            </div>
        </div>
        <div class="footer-copyright grey darken-4">
            <div class="container center-align">
            &copy; 2019 Project - Malaria Detection and Prevention: Hao Lu | Eric Yang | Tracy Guo
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>

    <script src="https://code.highcharts.com/highcharts.src.js"></script>
    <script src="https://code.highcharts.com/highcharts-3d.js"></script>
    <script src="https://code.highcharts.com/modules/sunburst.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.9.1/d3-tip.js"></script>
    <script src="https://unpkg.com/topojson@3.0.2/dist/topojson.min.js"></script>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <script>
        $(document).ready(function(){
            $('select').formSelect();
            $('.collapsible').collapsible();
        });
    </script>
    
    <script src="{{ url_for('static', filename='js/background.js') }}"></script>
    <script src="{{ url_for('static', filename='js/trend_sunburst.js') }}"></script>
    <script src="{{ url_for('static', filename='js/trend_map.js') }}"></script>
    <script src="{{ url_for('static', filename='js/cnn.js') }}"></script> 
    <script src="{{ url_for('static', filename='js/radio.js') }}"></script> 
    <script src="{{ url_for('static', filename='js/regression.js') }}"></script> 

  </body>